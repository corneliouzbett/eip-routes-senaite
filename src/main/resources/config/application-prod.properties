# *********************** General EIP sender properties ****************************************************************
#
eip.home=${user.home}${file.separator}.openmrs-eip

# Comma separated list of tables to watch for changes. The table names should be in lowercase.
eip.watchedTables=${EIP_WATCHED_TABLES}

# Camel endpoints that need to be notified of DB events
db-event.destinations=${DB_EVENT_DESTINATIONS}

# The interval in milliseconds between polls of the retry queue by the retry route
db-event.retry.interval=${DB_EVENT_RETRY_INTERVAL:1800000}

# The interval in milliseconds before the first poll of the retry queue by the retry route when the application starts.
db-event.retry.initial.delay=${DB_EVENT_RETRY_INITIAL_DELAY:120000}
# ----------------------------------------------------------------------------------------------------------------------


# *********************** Logging Configuration ************************************************************************
#
# Uncomment this to use console logging otherwise defaults to the logback.xml file located on the classpath which is
# configured to log to ${eip.home}/logs/openmrs-eip.log
logging.config=classpath:logback-console.xml

# Logging level for the application loggers (all built-in routes and classes)
openmrs.eip.log.level=DEBUG

# Logging level for ONLY application class loggers
logging.level.org.openmrs.eip=${openmrs.eip.log.level}
# ----------------------------------------------------------------------------------------------------------------------

# *********************** Configuration of the openMRS database to read from *******************************************
#
# The IP address or host name of the OpenMRS MySQL database
openmrs.db.host=${OPENMRS_DB_HOST}

# The OpenMRS MySQL database port
openmrs.db.port=${OPENMRS_DB_PORT}

# The OpenMRS MySQL database name
openmrs.db.name=${OPENMRS_DB_NAME}
# ----------------------------------------------------------------------------------------------------------------------

# *********************** OpenMRS Datasource config ********************************************************************
#
# Driver class of the openMRS datasource (should not be changed in a usual use)
spring.openmrs-datasource.driverClassName=com.mysql.cj.jdbc.Driver

# Dialect of the openMRS datasource (should not be changed in a usual use)
spring.openmrs-datasource.dialect=org.hibernate.dialect.MySQLDialect

# URL of the openMRS datasource, you don't have to change this value as long you've set the placeholder property values.
# For compatibility with MySQL 8, append the allowPublicKeyRetrieval=true parameter to the URL. For example;
# spring.openmrs-datasource.jdbcUrl=jdbc:mysql://${openmrs.db.host}:${openmrs.db.port}/${openmrs.db.name}?allowPublicKeyRetrieval=true
spring.openmrs-datasource.jdbcUrl=jdbc:mysql://${openmrs.db.host}:${openmrs.db.port}/${openmrs.db.name}

# User name of the openMRS datasource
spring.openmrs-datasource.username=${OPENMRS_DB_USERNAME}

# Password of the openMRS datasource
spring.openmrs-datasource.password=${OPENMRS_DB_PASSWORD}
# ----------------------------------------------------------------------------------------------------------------------

# *********************** Configuration of the Management database *****************************************************
#
# Driver class of the management datasource (should not be changed in a usual use)
spring.mngt-datasource.driverClassName=${EIP_MNGT_DB_DRIVER_CLASS_NAME:org.h2.Driver}

# Dialect of the management datasource (should not be changed in a usual use)
spring.mngt-datasource.dialect=${EIP_MNGT_DB_DIALECT:org.hibernate.dialect.H2Dialect}

# URL of the management datasource
# When using MySQL 8 for the management database, append the allowPublicKeyRetrieval=true parameter to the URL. For example;
# spring.mngt-datasource.jdbcUrl==jdbc:mysql://mysqlUrl:3306/openmrs_eip_mgt?allowPublicKeyRetrieval=true
spring.mngt-datasource.jdbcUrl=${EIP_MNGT_DB_JDBC_URL:jdbc:h2:file:${eip.home}/openmrs_eip_mgt}

# User name of the management datasource
spring.mngt-datasource.username=${EIP_MNGT_DB_USERNAME:sa}

# Password of the management datasource
spring.mngt-datasource.password=${EIP_MNGT_DB_PASSWORD:password}
# ----------------------------------------------------------------------------------------------------------------------

# *********************** Debezium Config ******************************************************************************
#
# For details explanations of this properties, please refer to
# https://debezium.io/documentation/reference/connectors/mysql.html#mysql-connector-properties
# Maps to the connect property named database.server.id, MUST match the server-id value in your my.cnf file when you
# enabled mysql binlog, DO NOT change after setting it
debezium.db.serverId=27002

# Unique logical name of the MySQL database server, maps to the debezium MySQL connector property named
# database.server.name, DO NOT change after setting it
debezium.db.serverName=eip-openmrs-senaite

# For a detailed explanation of usable Debezium Connector Component options/parameters including the one used in this example, please refer to https://camel.apache.org/components/3.20.x/debezium-mysql-component.html#_endpoint_query_option_additionalProperties
# To add an extra parameter allowPublicKeyRetrieval required by mysql 8, additionalProperties.database option documented in the above link will be used.
# debezium.extraParameters will be appended to the overall Debezium Connector component URL. Additionally, Debezium Connector Component options/parameters should be prefixed by & symbol. For example;
# debezium.extraParameters=&additionalProperties.database.allowPublicKeyRetrieval=true

# Database username for debezium user account you created to access the MySQL binlog, maps to the debezium MySQL
# connector property named database.user, it's highly recommended to create separate user account as described at
# https://debezium.io/documentation/reference/connectors/mysql.html#setting-up-mysql
debezium.db.user=${MYSQL_ROOT_USERNAME}

# Database password for debezium user account you created to access the MySQL binlog, maps to the debezium MySQL
# connector property named database.password
debezium.db.password=${MYSQL_ROOT_PASSWORD}

# Specifies the criteria for running a snapshot when the connector starts, DO NOT change after setting it, maps to the
# debezium MySQL connector property named snapshot.mode
debezium.snapshotMode=schema_only

#Controls whether and how long the connector holds the global MySQL read lock, which prevents any updates to
# the database, while the connector is performing a snapshot
# https://debezium.io/documentation/reference/connectors/mysql.html#mysql-property-snapshot-locking-mode
debezium.snapshotLockingMode=extended

# The interval in milliseconds before the first poll of the debezium event queue by the debezium reader route when the
# application starts.
debezium-event-reader.initial.delay=${DEBEZIUM_EVENT_READER_INITIAL_DELAY:1000}

# The interval in milliseconds between polls of the debezium event queue by the debezium reader route
debezium-event-reader.repeat.interval=${DEBEZIUM_EVENT_READER_REPEAT_INTERVAL:1000}

# The 2 properties below are debezium engine specific and are documented at
# https://debezium.io/documentation/reference/development/engine.html#engine-properties
#
# Path to file where offsets are to be stored, maps to property named offset.storage.file.filename, DO NOT change after
# setting it
debezium.offsetFilename=${DEBEZIUM_OFFSET_FILENAME:.offsets.txt}

# Path to file where offsets are to be stored, maps to property named database.history.file.filename, DO NOT change
# after setting it
debezium.historyFilename=${DEBEZIUM_HISTORY_FILENAME:.history.txt}

debezium.reader.maxBatchSize=${DEBEZIUM_READER_MAX_BATCH_SIZE:1000}
# ----------------------------------------------------------------------------------------------------------------------

# *********************** OAuth2 Configuration ********************************************************************
#Enabled Oauth when set to true
oauth.enabled=${OAUTH_ENABLED:false}

#The client Id of the account
oauth.access.token.uri=${OAUTH_ACCESS_TOKEN_URI}

#The client Id of the account to use to authenticate
oauth.client.id=${OAUTH_CLIENT_ID}

#The client secret of the account to use to authenticate
oauth.client.secret=${OAUTH_CLIENT_SECRET}
#Authentication scope, can be multiple values separated by commas
oauth.client.scope=${OAUTH_CLIENT_SCOPE}
# ----------------------------------------------------------------------------------------------------------------------
